apply plugin: "com.liferay.target.platform"
apply plugin: "java"

dependencies {
	compile group: "com.liferay.portal", name: "com.liferay.portal.kernel", version: "2.0.0"
}

task runGradleTest

runGradleTest {
	doLast {
		assert dependencyManagement.managedVersions.size() == 0

		def expectedFailure

		try {
			configurations.compile.resolvedConfiguration.resolvedArtifacts.files
		}
		catch (Exception e) {
			expectedFailure = e.cause
		}

		assert expectedFailure.message.contains("kernel:2.0.0")
	}
}